!function(t){function e(t){return{"./querystring":function(){var t={},e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=function(t){return"[object Array]"===r.call(t)},o={decode:function(t){var e;try{e=decodeURIComponent(t.replace(/\+/g,"%20"))}catch(r){e=t}return e},parse:function(t,r,i){var a,s,p,u,f,h,c={};if("string"!=typeof t||""===t)return c;for(r||(r="&"),i||(i="="),a=t.split(r),f=0,h=a.length;h>f;++f)s=a[f].split(i),p="undefined"!=typeof s[1]?o.decode(s[1]):"",u=o.decode(s[0]),e.call(c,u)?n(c[u])?c[u].push(p):c[u]=[c[u],p]:c[u]=p;return c},stringify:function(t,r,n){var o,i,a,s,p,u,f="";if(!t)return f;r||(r="&"),n||(n="=");for(u in t)if(e.call(t,u))for(a=[].concat(t[u]),s=0,p=a.length;p>s;++s)i=typeof a[s],o="object"===i||"undefined"===i?"":encodeURIComponent(a[s]),f+=r+encodeURIComponent(u)+n+o;return f.substr(r.length)}};return t.exports=o,t.exports},"./route":function(){function t(e){if(!(this instanceof t))return new t(e);if("string"==typeof e&&(e={pattern:e}),!e||"object"!=typeof e)throw new Error("You must specify options");if("string"!=typeof e.pattern)throw new Error("You must specify the pattern of the route");this._options=e,this._conditions=e.conditions&&"object"==typeof e.conditions?e.conditions:{},e.isTrailingSlashOptional!==!1&&(e.pattern+=c+f+m+h+l,this._conditions[m]=P),e.useQueryString!==!1&&(e.pattern+=c+"?"+f+x+h+l,this._conditions[x]=".*"),this._parts=this._parsePattern(e.pattern),this._buildParseRegExp(),this._buildBuildFn()}var r={},n=Object.prototype.hasOwnProperty,o=function(t,e){return n.call(t,e)},i=Object.prototype.toString,a=function(t){return"[object Array]"===i.call(t)},s=e("./querystring"),p=function(){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],e=new RegExp("(\\"+t.join("|\\")+")","g");return function(t){return t.replace(e,"\\$1")}}(),u=String(Math.random()).substr(2,5),f="<",h=">",c="(",l=")",d="[a-zA-Z_][\\w\\-]*",_="[\\w\\-\\.~]+",g=new RegExp("("+p(f)+d+p(h)+"|"+"[^"+p(f)+p(h)+"]+"+"|"+p(f)+"|"+p(h)+")","g"),m="ts_"+u,y="/",P=p("/"),x="qs_"+u;return t.prototype._parsePattern=function(t){for(var e,r,n,o=[],i="",a=0,s=0,p=!1,u=t.length;u>a;)if(e=t.charAt(a++),e===c)p?(++s,i+=e):(this._parseParams(i,o),i="",s=0,p=!0);else if(e===l)if(p)if(0===s){for(i={what:"optional",dependOnParams:[],parts:this._parsePattern(i)},o.push(i),r=0,n=i.parts.length;n>r;++r)i.parts[r]&&"param"===i.parts[r].what&&i.dependOnParams.push(i.parts[r].name);i="",p=!1}else--s,i+=e;else i+=e;else i+=e;return this._parseParams(i,o),o},t.prototype._parseParams=function(t,e){var r,n,o,i=t.match(g);if(i)for(r=0,n=i.length;n>r;++r)o=i[r],o.charAt(0)===f&&o.charAt(o.length-1)===h?e.push({what:"param",name:o.substr(1,o.length-2)}):e.push(o)},t.prototype._buildParseRegExp=function(){this._reqExpParamsMap=[],this._parseRegExpSource="^"+this._buildParseRegExpParts(this._parts)+"$",this._parseRegExp=new RegExp(this._parseRegExpSource)},t.prototype._buildParseRegExpParts=function(t){var e,r,n,o="";for(e=0,r=t.length;r>e;++e)n=t[e],"string"==typeof n?o+=p(n):"param"===n.what?(this._reqExpParamsMap.push(n.name),o+="("+(this._getParamValueRegExpSource(n.name)||_)+")"):o+="(?:"+this._buildParseRegExpParts(n.parts)+")?";return o},t.prototype._getParamValueRegExpSource=function(t){var e,r,n=this._conditionRegExpSources||(this._conditionRegExpSources={}),i=this._conditions;return o(n,t)||(o(i,t)?(r=i[t],e=a(r)?"(?:"+r.join("|")+")":r+""):e=null,n[t]=e),n[t]},t.prototype._getParamValueRegExp=function(t){var e,r=this._conditionRegExps||(this._conditionRegExps={});return o(r,t)||(e=this._getParamValueRegExpSource(t),r[t]=e?new RegExp("^"+e+"$"):null),r[t]},t.prototype._checkParamValue=function(t,e){var r=this._getParamValueRegExp(t);return r?r.test(e):!0},t.prototype._buildBuildFn=function(){this._mainParamsMap={},this._buildFnSource="var h=({}).hasOwnProperty;return "+this._buildBuildFnParts(this._parts)+";",this._buildFn=new Function("p",this._buildFnSource)},t.prototype._buildBuildFnParts=function(t){var e,r,n,i,a,s,u='""',f=this._options.defaults;for(e=0,r=t.length;r>e;++e)if(a=t[e],"string"==typeof a)u+='+"'+p(a)+'"';else if("param"===a.what)this._mainParamsMap[a.name]=!0,u+='+(h.call(p,"'+p(a.name)+'")?'+'p["'+p(a.name)+'"]:'+(f&&o(f,a.name)?'"'+p(f[a.name])+'"':'""')+")";else{for(u+="+((false",n=0,i=a.dependOnParams.length;i>n;++n)s=a.dependOnParams[n],u+='||(h.call(p,"'+p(s)+'")'+(f&&o(f,s)?'&&p["'+p(s)+'"]!=="'+p(f[s])+'"':"")+")";u+=")?("+this._buildBuildFnParts(a.parts)+'):"")'}return u},t.prototype._isDataMatched=function(t){var e,r=this._options.data;if("function"==typeof t)return Boolean(t(r));if(t&&"object"==typeof t)for(e in t)if(o(t,e)&&(!r||"object"!=typeof r||r[e]!==t[e]))return!1;return!0},t.prototype.match=function(t,e){var r,n,i,p,u,f,h,c=null,l=this._options,d=l.postMatch,_=l.defaults;if("string"!=typeof t||e&&!this._isDataMatched(e))return c;if(r=t.match(this._parseRegExp)){for(c={},n=1,i=r.length;i>n;++n)if("undefined"!=typeof r[n]&&""!==r[n])if(p=this._reqExpParamsMap[n-1],p===x)h=r[n];else if(p===m){if(t.charAt(t.length-2)===y)return null}else c[p]=r[n];if(h){f=s.parse(h);for(p in f)if(o(f,p)&&!o(c,p))if(u=f[p],this._mainParamsMap[p]&&a(u)&&(u=u[0]),a(u))for(c[p]=[],n=0,i=u.length;i>n;++n)this._checkParamValue(p,u[n])&&c[p].push(u[n]);else this._checkParamValue(p,u)&&(c[p]=u)}for(p in _)o(_,p)&&!o(c,p)&&(c[p]=_[p])}return c&&"function"==typeof d&&(c=d(c),c&&"object"==typeof c||(c=null)),c},t.prototype.build=function(t){var e,r,n=this._options,i={},a=n.useQueryString!==!1,p={},u=n.preBuild;"function"==typeof u&&(t=u(t));for(r in t)o(t,r)&&null!==t[r]&&"undefined"!=typeof t[r]&&(this._mainParamsMap[r]?i[r]=t[r]:a&&(p[r]=t[r]));return a&&(e=s.stringify(p),e&&(i[x]=e)),this._buildFn(i)},t.prototype.getData=function(){return this._options.data},t.prototype.getName=function(){return this._options.name},r.exports=t,r.exports},"./router":function(){function t(){return this instanceof t?(this._routes=[],this._routesByName={},void 0):new t}var r={},n=e("./route");return t.prototype.addRoute=function(t){var e,r;return e=new n(t),this._routes.push(e),r=e.getName(),r&&(this._routesByName[r]=e),e},t.prototype.find=function(){var t,e,r,n=[],o=this._routes;for(e=0,r=o.length;r>e;++e)t=o[e].match.apply(o[e],arguments),null!==t&&n.push([o[e],t]);return n},t.prototype.findFirst=function(){var t,e,r,n=this._routes;for(e=0,r=n.length;r>e;++e)if(t=n[e].match.apply(n[e],arguments),null!==t)return[n[e],t];return null},t.prototype.getRouteByName=function(t){return this._routesByName[t]||null},t.Route=n,r.exports=t,r.exports}}[t]()}var r=e("./router"),n=!0;t.module&&"object"==typeof module.exports&&(module.exports=r,n=!1),t.modules&&modules.define&&modules.require&&(modules.define("susanin",function(t){t(r)}),n=!1),"function"==typeof t.define&&define.amd&&(define(function(){return r}),n=!1),n&&(t.Susanin=r)}(this);